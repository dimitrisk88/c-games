#include<stdio.h>
main()
{
	int i,j=0,winsx=0,winso=0,draw=0;
	char a[145],b,c;
start:
	a[0]=201;
	a[1]=205;
	a[2]=205;
	a[3]=205;
	a[4]=205;
	a[5]=205;
	a[6]=205;
	a[7]=205;
	a[8]=205;
	a[9]=205;
	a[10]=205;
	a[11]=205;
	a[12]=205;
	a[13]=205;
	a[14]=187;
	a[15]=10;
	a[16]=186;
	a[17]=32;
	a[18]=32;
	a[19]=32;
	a[20]=32;
	a[21]=179;
	a[22]=32;
	a[23]=32;
	a[24]=32;
	a[25]=179;
	a[26]=32;
	a[27]=32;
	a[28]=32;
	a[29]=32;
	a[30]=186;
	a[31]=10;
	a[32]=186;
	a[33]=32;
	a[34]=32;
	a[35]=49;
	a[36]=32;
	a[37]=179;
	a[38]=32;
	a[39]=50;
	a[40]=32;
	a[41]=179;
	a[42]=32;
	a[43]=51;
	a[44]=32;
	a[45]=32;
	a[46]=186;
	a[47]=10;
	a[48]=186;
	a[49]=32;
	a[50]=196;
	a[51]=196;
	a[52]=196;
	a[53]=197;
	a[54]=196;
	a[55]=196;
	a[56]=196;
	a[57]=197;
	a[58]=196;
	a[59]=196;
	a[60]=196;
	a[61]=32;
	a[62]=186;
	a[63]=10;
	a[64]=186;
	a[65]=32;
	a[66]=32;
	a[67]=52;
	a[68]=32;
	a[69]=179;
	a[70]=32;
	a[71]=53;
	a[72]=32;
	a[73]=179;
	a[74]=32;
	a[75]=54;
	a[76]=32;
	a[77]=32;
	a[78]=186;
	a[79]=10;
	a[80]=186;
	a[81]=32;
	a[82]=196;
	a[83]=196;
	a[84]=196;
	a[85]=197;
	a[86]=196;
	a[87]=196;
	a[88]=196;
	a[89]=197;
	a[90]=196;
	a[91]=196;
	a[92]=196;
	a[93]=32;
	a[94]=186;
	a[95]=10;
	a[96]=186;
	a[97]=32;
	a[98]=32;
	a[99]=55;
	a[100]=32;
	a[101]=179;
	a[102]=32;
	a[103]=56;
	a[104]=32;
	a[105]=179;
	a[106]=32;
	a[107]=57;
	a[108]=32;
	a[109]=32;
	a[110]=186;
	a[111]=10;
	a[112]=186;
	a[113]=32;
	a[114]=32;
	a[115]=32;
	a[116]=32;
	a[117]=179;
	a[118]=32;
	a[119]=32;
	a[120]=32;
	a[121]=179;
	a[122]=32;
	a[123]=32;
	a[124]=32;
	a[125]=32;
	a[126]=186;
	a[127]=10;
	a[128]=200;
	a[129]=205;
	a[130]=205;
	a[131]=205;
	a[132]=205;
	a[133]=205;
	a[134]=205;
	a[135]=205;
	a[136]=205;
	a[137]=205;
	a[138]=205;
	a[139]=205;
	a[140]=205;
	a[141]=205;
	a[142]=188;
	a[143]=10;
	a[144]=0;
	system("cls");
	printf("%s",a);
	printf("\n\n\n X %c draws %c O \n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n %d %c   %d   %c %d \n",179,179,196,196,196,197,196,196,196,196,196,196,196,197,196,196,196,winsx,179,draw,179,winso);
	for(i=0;i<9;i++)
	{
		if((i+j)%2==0)
			c='X';
		else
			c='O';
ekanesvlakeia:
		b=getch();
		switch (b)
		{
		case '1':
			if(a[35]==49)
				a[35]=c;
			else
			{
				printf("%c %c%c%c%c 1 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '2':
			if(a[39]==50)
				a[39]=c;
			else
			{
				printf("%c %c%c%c%c 2 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '3':
			if(a[43]==51)
				a[43]=c;
			else
			{
				printf("%c %c%c%c%c 3 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '4':
			if(a[67]==52)
				a[67]=c;
			else
			{
				printf("%c %c%c%c%c 4 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '5':
			if(a[71]==53)
				a[71]=c;
			else
			{
				printf("%c %c%c%c%c 5 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '6':
			if(a[75]==54)
				a[75]=c;
			else
			{
				printf("%c %c%c%c%c 6 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '7':
			if(a[99]==55)
				a[99]=c;
			else
			{
				printf("%c %c%c%c%c 7 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '8':
			if(a[103]==56)
				a[103]=c;
			else
			{
				printf("%c %c%c%c%c 8 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		case '9':
			if(a[107]==57)
				a[107]=c;
			else
			{
				printf("%c %c%c%c%c 9 %c%c%c%c%c %c%c%c%c%c%c%c%c\n",134,159,226,169,158,156,229,164,152,160,167,160,152,169,163,226,164,158);
				goto ekanesvlakeia;
			}
			break;
		default:
			printf("%c%c%c %c%c%c%c%c%c%c%c %c%c%c%c%c%c%c 1-9\n",131,156,164,167,152,171,227,159,158,161,156,152,168,160,159,163,230,170);
			goto ekanesvlakeia;
		}
		system("cls");
		puts(a);
		printf("\n\n X %c draws %c O \n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n %d %c   %d   %c %d \n",179,179,196,196,196,197,196,196,196,196,196,196,196,197,196,196,196,winsx,179,draw,179,winso);
		if(a[35]==a[39]&&a[39]==a[43])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[39]);
			if(a[39]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[67]==a[71]&&a[71]==a[75])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[71]);
			if(a[71]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[99]==a[103]&&a[103]==a[107])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[103]);
			if(a[103]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[35]==a[67]&&a[67]==a[99])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[67]);
			if(a[67]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[39]==a[71]&&a[71]==a[103])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[71]);
			if(a[39]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[43]==a[75]&&a[75]==a[107])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[75]);
			if(a[74]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[35]==a[71]&&a[71]==a[107])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[71]);
			if(a[107]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(a[43]==a[71]&&a[71]==a[99])
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c%c %c%c %c!",137,156,168,155,229,157,166,172,164,171,152,a[71]);
			if(a[71]=='X')
			{
				winsx++;
				if(j==1)
					j=0;
			}
			else
			{
				winso++;
				if(j==0)
					j=1;
			}
			break;
		}
		else if(i==8)
		{
			system("cls");
			puts(a);
			printf("%c%c%c%c%c%c%c%c...",136,169,166,167,152,162,229,152);
			draw++;
			if(j==1)
				j=0;
			else
				j=1;
		}
	}
	printf("\n\n X %c draws %c O \n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n %d %c   %d   %c %d \n\nPress any key to continue",179,179,196,196,196,197,196,196,196,196,196,196,196,197,196,196,196,winsx,179,draw,179,winso);
	getch();
	goto start;
}
